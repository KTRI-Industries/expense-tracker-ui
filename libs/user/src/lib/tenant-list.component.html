<mat-card>
  <mat-card-header>
    <mat-card-title>Tenants</mat-card-title>
    <mat-card-subtitle>
      Here you can see all the tenants you are member of.
    </mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    @if (!!tenants && tenants.length > 0) {
      <mat-table [dataSource]="tenantsDatasource || []">
        <ng-container matColumnDef="mainUserEmail">
          <mat-header-cell *matHeaderCellDef>Owner</mat-header-cell>
          <mat-cell *matCellDef="let element" data-label="Owner">
            {{ element.mainUserEmail }}
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="isAssociated">
          <mat-header-cell *matHeaderCellDef>Actions</mat-header-cell>
          <mat-cell *matCellDef="let element" data-label="Actions">
            @if (!element.isCurrentUserOwner) {
              @if (element.isAssociated) {
                <button
                  mat-raised-button
                  color="primary"
                  (click)="onLeave(element)"
                  data-cy="select-tenant-button">
                  Leave tenant
                </button>
              } @else {
                <button
                  mat-raised-button
                  color="primary"
                  (click)="onAccept(element)"
                  data-cy="associate-tenant-button">
                  Accept invitation
                </button>
              }
            }
          </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
      </mat-table>
    }
  </mat-card-content>

  <mat-card-actions></mat-card-actions>
</mat-card>
