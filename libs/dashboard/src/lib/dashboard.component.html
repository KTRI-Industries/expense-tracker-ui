<!-- inline block used to make the card width match the content width -->
<mat-card class="lg:inline-block mb-2">
  <!-- py-2 and px-2 decrease the default padding around the card content -->
  <mat-card-content class="py-2 px-2">
    <!-- flex flex-wrap lg:items-center lg:space-x-4 makes the form items align in a row with the button -->
    <form
      [formGroup]="form"
      class="flex flex-wrap lg:items-center lg:space-x-4">
      <formly-form
        [form]="form"
        [fields]="fields"
        [model]="model"
        [options]="options"></formly-form>
      <button
        *ngIf="isCustomFilter()"
        mat-button
        color="primary"
        type="submit"
        class="mt-4 lg:mt-0"
        (click)="applyCustomFilter()">
        Apply
      </button>
    </form>
  </mat-card-content>
</mat-card>
<!-- single column in small screens, 2 in medium 4 in large -->
<div class="grid grid-cols-1 gap-4 lg:gap-20 md:grid-cols-2 lg:grid-cols-4">
  <mat-card class="p-4 text-center">
    <mat-card-title class="text-center text-green-500">
      {{
        dashboard?.mainTransactionData?.totalIncome?.amount ?? 0
          | currency: dashboard?.mainTransactionData?.totalIncome?.currency
      }}
    </mat-card-title>
    <mat-card-content class="text-center">Income</mat-card-content>
  </mat-card>
  <mat-card class="p-4 text-center">
    <mat-card-title class="text-center text-red-500">
      {{
        dashboard?.mainTransactionData?.totalExpense?.amount ?? 0
          | currency: dashboard?.mainTransactionData?.totalExpense?.currency
      }}
    </mat-card-title>
    <mat-card-content class="text-center">Expenses</mat-card-content>
  </mat-card>
  <mat-card class="p-4 text-center">
    <mat-card-title class="text-center text-blue-500">
      {{
        dashboard?.mainTransactionData?.totalBalance?.amount ?? 0
          | currency: dashboard?.mainTransactionData?.totalBalance?.currency
      }}
    </mat-card-title>
    <mat-card-content class="text-center">Balance</mat-card-content>
  </mat-card>
  <mat-card class="p-4 text-center">
    <mat-card-title class="text-center text-purple-500">
      {{ dashboard?.mainTransactionData?.totalTransactions }}
    </mat-card-title>
    <mat-card-content class="text-center">Transactions</mat-card-content>
  </mat-card>
</div>

<div class="mt-8">
  <mat-card class="p-4">
    <mat-card-title class="text-center">Expenses by Category</mat-card-title>
    <mat-card-content>
      <!-- max width to something smal and margins left and righ to auto -->
      <div class="w-full max-w-xs mx-auto">
        @if (chartData !== null) {
          <canvas
            baseChart
            [data]="chartData"
            [options]="doughnutChartOptions"
            type="doughnut"></canvas>
        }
      </div>
    </mat-card-content>
  </mat-card>
</div>
